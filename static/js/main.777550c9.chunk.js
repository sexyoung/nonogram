(this.webpackJsonpnonogram=this.webpackJsonpnonogram||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports={winWrapper:"style_winWrapper__yYes1",fadeIn:"style_fadeIn__1NSe1",win:"style_win__28PJQ",show:"style_show__q6u69",matrix:"style_matrix__2l_BV",row:"style_row__G4Dr4",col:"style_col__1z01R",check:"style_check__D9dPB",title:"style_title__2ICcC"}},function(e,t,a){e.exports={Nonogram:"style_Nonogram__3tK8B",firstRow:"style_firstRow__KoKH9",secondRow:"style_secondRow__27LXo",matrixBlock:"style_matrixBlock__22fCq"}},,,,,function(e,t,a){e.exports={Matrix:"style_Matrix__38DTq",row:"style_row__2RvTf",col:"style_col__3KT2s",check:"style_check__K2_pg",cross:"style_cross__DmXG8"}},function(e,t,a){e.exports={BitLine:"style_BitLine__1kG7B",horizontal:"style_horizontal__2lPrP",Line:"style_Line__2bubD",vertical:"style_vertical__2mTT-",BitNumber:"style_BitNumber__2d5NI"}},function(e,t,a){e.exports={NonogramPage:"style_NonogramPage__1x-1w",header:"style_header__SOPT1",lv:"style_lv__301J7",time:"style_time__2BZOW",pause:"style_pause__37qtt"}},,,,,,,function(e,t,a){e.exports={HomePage:"style_HomePage__39HyE",header:"style_header__3BzhK",stage:"style_stage__8mMif"}},function(e,t,a){e.exports={menuWrapper:"style_menuWrapper__2swOq",menu:"style_menu__WhB4M",title:"style_title__3zmDS"}},,,,,,,,,function(e){e.exports=JSON.parse("[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]")},function(e){e.exports=JSON.parse("[[1,1,0,0,0,1],[0,1,0,1,1,1],[0,1,0,1,1,0],[0,1,1,1,0,0],[0,1,1,1,1,0],[0,0,0,1,0,0]]")},function(e){e.exports=JSON.parse("[[0,1,1,1,0,0,0,0],[1,1,0,1,0,0,0,0],[0,1,1,1,0,0,1,1],[0,0,1,1,0,0,1,1],[0,0,1,1,1,1,1,1],[1,0,1,1,1,1,1,0],[1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,1,0,0,0]]")},function(e){e.exports=JSON.parse("[[0,0,0,0,0,1,0,0,0,0],[0,0,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,0,0],[1,1,0,1,0,1,1,1,1,1],[0,1,0,1,1,1,1,1,0,1],[0,1,0,1,0,1,1,1,0,1],[0,1,1,1,0,1,1,1,0,1],[0,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,0,0]]")},function(e,t,a){e.exports={SignTool:"style_SignTool__2i_1S"}},function(e,t,a){},,function(e,t,a){e.exports=a(51)},,,,,,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(20),l=a.n(i),o=a(11),s=a(6),u=(a(49),a(17)),m=a(1),_={stage1:a(33),stage2:a(34),stage3:a(35),stage4:a(36)},f=a(23),d=a.n(f),E=function(e){return c.a.createElement("div",{className:d.a.HomePage},c.a.createElement("header",{className:d.a.header},"Stage select"),Object.keys(_).map((function(e){return c.a.createElement(u.b,{to:"/game/".concat(e),key:e,className:d.a.stage},e)})))},h=a(13);!function(e){e.WIN="WIN",e.PAUSE="PAUSE",e.PLAYING="PLAYING"}(n||(n={}));var y,v=function(e){return{type:"SET_STATUS",payload:e}};!function(e){e[e.NONE=0]="NONE",e[e.CHECK=1]="CHECK",e[e.CROSS=-1]="CROSS"}(y||(y={}));var g,p=a(5),N=a(12),b=a.n(N),O=a(8),S=a.n(O),x=function(e){var t=e.onNext,a=e.onRestart,n=e.matrixData,i=e.onBackMenu,l=Object(r.createRef)();return Object(r.useEffect)((function(){var e=n.length,t=n[0].length;l.current.style.height="".concat(l.current.offsetWidth/e*t,"px")}),[]),c.a.createElement("div",{className:S.a.winWrapper},c.a.createElement("ul",{className:S.a.win},c.a.createElement("li",null,c.a.createElement("div",{ref:l,className:S.a.matrix},n.map((function(e,t){return c.a.createElement("div",{key:t,className:S.a.row},e.map((function(e,t){return c.a.createElement("div",{key:t,className:b()(S.a.col,Object(p.a)({},S.a.check,e))})})))})))),c.a.createElement("li",{className:S.a.title},"YOU WIN"),c.a.createElement("li",{onClick:t},"Next"),c.a.createElement("li",{onClick:a},"Restart"),c.a.createElement("li",{onClick:i},"Menu")))},w=a(24),k=a.n(w),j=function(e){var t=e.onClose,a=e.onRestart,n=e.onBackMenu,i=Object(r.createRef)();return c.a.createElement("div",{ref:i,className:k.a.menuWrapper,onClick:function(e){e.target===i.current&&t()}},c.a.createElement("ul",{className:k.a.menu},c.a.createElement("li",{className:k.a.title},"PAUSE"),c.a.createElement("li",{onClick:t},"Resume"),c.a.createElement("li",{onClick:a},"Restart"),c.a.createElement("li",{onClick:n},"Menu")))},C=a(39),T=a(37),I=a.n(T),L={changeSign:function(e){return function(e){return{type:"CHANGE_SIGN",payload:e}}(e)}},B=Object(s.b)((function(e){return{sign:e.sign}}),L)((function(e){var t=e.changeSign,a=Object(C.a)(e,["changeSign"]),n=function(e){t(+e.target.value)};return c.a.createElement("div",{className:I.a.SignTool},c.a.createElement("input",{id:"check",name:"sign",type:"radio",value:y.CHECK,onChange:n,checked:a.sign===y.CHECK}),c.a.createElement("label",{htmlFor:"check"},"\u2713 check"),c.a.createElement("input",{id:"cross",name:"sign",type:"radio",value:y.CROSS,onChange:n,checked:a.sign===y.CROSS}),c.a.createElement("label",{htmlFor:"cross"},"\xd7 cross"))})),P=a(7),R=a(4),A=a(14),M=a.n(A),W={mark:function(e){return{type:"MARK",payload:e}},setStatus:v},H=Object(s.b)((function(e){return{sign:e.sign,martrix:e.martrix}}),W)((function(e){var t=e.mark,a=e.data,i=e.sign,l=e.martrix,o=e.setStatus,s=Object(r.useState)(-1),u=Object(P.a)(s,2),m=u[0],_=u[1],f=Object(r.useState)(-1),d=Object(P.a)(f,2),E=d[0],h=d[1],v=Object(r.useState)(!1),g=Object(P.a)(v,2),N=g[0],O=g[1],S=function(e,a){l[e][a]===i?(O(!0),t({x:e,y:a,sign:y.NONE})):t({x:e,y:a,sign:i})},x=function(e){var a=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);if(null!==a&&"box"===a.getAttribute("data-type")){var n=+a.getAttribute("data-x"),r=+a.getAttribute("data-y");n===m&&r===E||(_(n),h(r),t({x:n,y:r,sign:N?y.NONE:i}))}},w=function(){O(!1)};return Object(r.useEffect)((function(){l.every((function(e,t){return Object(R.a)(e.keys()).every((function(e){return l[t][e]===y.CHECK?l[t][e]===a[t][e]:a[t][e]!==y.CHECK}))}))&&o(n.WIN)}),[l,a]),c.a.createElement("div",{className:M.a.Matrix},a.map((function(e,t){return c.a.createElement("div",{key:t,className:M.a.row},Object(R.a)(e.keys()).map((function(e){var a;return c.a.createElement("div",{"data-x":t,"data-y":e,"data-type":"box",key:e,className:b()(M.a.col,(a={},Object(p.a)(a,M.a.check,1===l[t][e]),Object(p.a)(a,M.a.cross,-1===l[t][e]),a)),onTouchStart:S.bind(void 0,t,e),onTouchMove:x,onTouchEnd:w})})))})))})),K=a(15),D=a.n(K),G=function(e){return Math.max.apply(Math,Object(R.a)(e.map((function(e){return e.length}))))},z=function(e){var t=e.data,a=e.direction,n=G(t);return c.a.createElement("div",{className:b()(D.a.BitLine,Object(p.a)({},D.a[a],!0))},t.map((function(e,t){return c.a.createElement("div",{key:t,className:D.a.Line},c.a.createElement("div",{className:D.a.offset,style:{flex:n-e.length}}),e.map((function(e,t){return c.a.createElement("div",{key:t,className:D.a.BitNumber},e)})))})))},U=a(9),Y=a.n(U),J=function(e){return e.join("").replace(/00/g,"0").split("0").map((function(e){return e.length})).filter((function(e){return e}))},X=function(e){var t=e.matrixData,a=Object(R.a)(Array(t[0].length).keys()).map((function(e){return J(t.map((function(t){return t[e]})))})),n=t.map(J),i=G(n),l=G(a),o={flex:i},s={flex:a.length},u=function(e){var t=e.hLen,a=e.vLen,n=Object(r.useState)([0,0]),c=Object(P.a)(n,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){var e=0,n=0;function r(){var r=0,c=0;if(!t||!a)return l([0,0]);var i,o=window,s=o.innerWidth,u=o.innerHeight,m={wBaseSize:{width:(i={hLen:t,vLen:a,borderW:s,borderH:u}).borderW,height:i.borderW/i.hLen*i.vLen},hBaseSize:{width:i.borderH/i.vLen*i.hLen,height:i.borderH}},_=m.wBaseSize,f=m.hBaseSize;_.width<=s&&_.height<=u?(r=_.width,c=_.height):(r=f.width,c=f.height),e===r&&n===c||(l([r,c]),e=r,n=c)}return window.addEventListener("resize",r),r(),function(){return window.removeEventListener("resize",r)}}),[t,a]),i}({hLen:a.length+i,vLen:n.length+l}),m=Object(P.a)(u,2),_=m[0],f=m[1];return _&&f?c.a.createElement("div",{style:{width:_,height:f},className:Y.a.Nonogram},c.a.createElement("div",{className:Y.a.firstRow,style:{flex:l}},c.a.createElement("div",{className:Y.a.empty,style:o}),c.a.createElement("div",{className:Y.a.horizontalInfo,style:s},c.a.createElement(z,{data:a,direction:"horizontal"}))),c.a.createElement("div",{className:Y.a.secondRow,style:{flex:n.length}},c.a.createElement("div",{className:Y.a.verticalInfo,style:o},c.a.createElement(z,{data:n,direction:"vertical"})),c.a.createElement("div",{className:Y.a.matrixBlock,style:s},c.a.createElement(H,{data:t})))):null},q=a(16),F=a.n(q),V=function(e){return e.map((function(e){return Array(e.length).fill(0)}))},Q={set:function(e){return{type:"SET",payload:e}},setTime:function(e){return{type:"SET_TIME",payload:e}},tickTime:function(){return{type:"TICK_TIME"}},setStatus:v},Z=Object(s.b)((function(e){return Object(h.a)({},e.game)}),Q)((function(e){var t=e.set,a=e.time,i=e.status,l=e.setTime,o=e.tickTime,s=e.setStatus,u=Object(m.f)(),f=Object(m.g)().lv,d=n.WIN===i,E=n.PAUSE===i,h=n.PLAYING===i;Object(r.useEffect)((function(){t(V(_[f]))}),[f]),Object(r.useEffect)((function(){return h&&(g=setInterval((function(){o()}),1e3)),function(){return clearInterval(g)}}),[h]),Object(r.useEffect)((function(){d&&clearInterval(g)}),[d]);var y=function(){l(0),s(n.PLAYING),t(V(_[f]))},v=function(){y(),u.push("/")};return c.a.createElement("div",{className:F.a.NonogramPage},c.a.createElement(X,{matrixData:_[f]}),c.a.createElement(B,null),c.a.createElement("div",{className:F.a.header},c.a.createElement("div",{className:F.a.lv},"Stage ",f.slice(5)),c.a.createElement("div",{className:F.a.time},function(e){var t="00".concat(e%60).slice(-2);return~~(e/60)&&(t="".concat(~~(e/60),":").concat(t)),t}(a)),c.a.createElement("div",{className:F.a.pause,onClick:s.bind(void 0,n.PAUSE)})),E&&c.a.createElement(j,{onRestart:y,onBackMenu:v,onClose:s.bind(void 0,n.PLAYING)}),d&&c.a.createElement(x,{onNext:function(){var e=Object.keys(_),a=(e.indexOf(f)+1)%e.length;l(0),t(V(_[e[a]])),u.push("/game/".concat(e[a])),s(n.PLAYING)},matrixData:_[f],onRestart:y,onBackMenu:v}))})),$=function(e){return c.a.createElement("div",null,"NotFoundPage")},ee=a(38),te=a.n(ee);function ae(){return c.a.createElement("div",{className:te.a.App},c.a.createElement(u.a,null,c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/"},c.a.createElement(E,null)),c.a.createElement(m.a,{exact:!0,path:"/game/:lv"},c.a.createElement(Z,null)),c.a.createElement(m.a,{path:"*"},c.a.createElement($,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne={time:0,status:n.PLAYING},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TICK_TIME":return Object(h.a)({},e,{time:e.time+1});case"SET_TIME":return Object(h.a)({},e,{time:t.payload});case"SET_STATUS":return Object(h.a)({},e,{status:t.payload});default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.CHECK,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SIGN":return t.payload;default:return e}},ie=[[]],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return Object(R.a)(t.payload);case"MARK":var a=t.payload,n=a.x,r=a.y,c=a.sign,i=Object(R.a)(e);return i[n][r]=c,i;default:return e}},oe=Object(o.b)({game:re,sign:ce,martrix:le}),se=Object(o.c)(oe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(c.a.createElement(s.a,{store:se},c.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[40,1,2]]]);
//# sourceMappingURL=main.777550c9.chunk.js.map